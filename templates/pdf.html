<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{.TestName}} - Resultado</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { background: #fff; }
      .question-card {
        border-left: 5px solid #eee;
        margin-bottom: 16px;
      }
      .answer-correct { color: #198754; font-weight: bold; }
      .answer-wrong { color: #dc3545; font-weight: bold; }
      .correct-label { background: #198754; color: #fff; padding: 2px 10px; border-radius: 8px; margin-left: 8px;}
      .wrong-label { background: #dc3545; color: #fff; padding: 2px 10px; border-radius: 8px; margin-left: 8px;}
      .footer { text-align: center; font-size: 0.9em; color: #888; margin-top: 40px; }
    </style>
</head>
<body>
  <div class="container py-5">
    <div class="row mb-4">
      <div class="col-md-8 mx-auto text-center">
        <h1 class="display-5 mb-3">{{.TestName}} <small class="text-muted">Resultado</small></h1>
        <div class="my-4">
          <span class="fs-4">Nota: <span class="fw-bold">{{printf "%.2f" .Score}}%</span></span>
        </div>
        <div class="my-2">
          <span class="badge bg-secondary">
            Nota mínima para aprovação: <b>{{printf "%.2f" .PassingPercent}}%</b>
          </span>
        </div>
        <div class="mb-3">
          <span class="badge {{if .Passed}}bg-success{{else}}bg-danger{{end}} fs-5 py-2 px-4">
            {{if .Passed}}Aprovado!{{else}}Reprovado{{end}}
          </span>
        </div>
        <p>
          <span class="me-3">Total de questões: <b>{{.Total}}</b></span>
          <span>Corretas: <b>{{.Correct}}</b></span>
        </p>
      </div>
    </div>
    <hr class="mb-4">
    <div class="row">
      <div class="col-md-10 mx-auto">
        <h3 class="mb-3">Revisão das questões</h3>
        {{range $idx, $res := .Results}}
        <div class="card question-card {{if $res.IsCorrect}}border-success{{else}}border-danger{{end}}">
          <div class="card-body">
            <h5 class="card-title">
              Questão {{add1 $idx}}
              {{if $res.IsCorrect}}
                <span class="correct-label">Acertou</span>
              {{else}}
                <span class="wrong-label">Errou</span>
              {{end}}
            </h5>
            <p class="mb-2"><b>{{$res.Question}}</b></p>
            <ul>
              <li>
                <span>Sua resposta: </span>
                <span class="{{if $res.IsCorrect}}answer-correct{{else}}answer-wrong{{end}}">
                  {{$res.UserAnswer}}
                </span>
              </li>
              <li>
                <span>Resposta correta: <span class="answer-correct">{{$res.CorrectAnswer}}</span></span>
              </li>
            </ul>
            <div class="alert alert-info my-2">
              <strong>Explicação:</strong> {{$res.Explanation}}
            </div>
          </div>
        </div>
        {{end}}
      </div>
    </div>
    <div class="footer">
      <hr>
      <p>Gerado por <b>RunExam</b> &ndash; <a href="https://github.com/fpinna/runexam">https://github.com/fpinna/runexam</a></p>
    </div>
  </div>
</body>
</html>
