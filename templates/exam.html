<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{.TestMetadata.TestName}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .exam-header {
        background: #fff;
        border-radius: 1.5rem;
        box-shadow: 0 2px 16px #e0e7ef66;
        padding: 2rem 2rem 1.5rem 2rem;
        margin-bottom: 2rem;
      }
      .exam-meta {
        font-size: 1rem;
        color: #777;
      }
      .domain-badge {
        background: #198754;
        color: #fff;
        font-size: 0.95em;
        border-radius: 8px;
        margin-right: 8px;
        padding: 2px 12px;
        display: inline-block;
        margin-bottom: 5px;
      }
      .question-card {
        border-left: 5px solid #eee;
      }
      .submit-btn {
        font-size: 1.15em;
        padding: 12px 32px;
      }
      .option-radio {
        margin-bottom: 0.75rem;
      }
    </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <!-- Exam Header with metadata and info -->
    <div class="exam-header mb-5 text-center">
      <h1 class="mb-2">{{.TestMetadata.TestName}}</h1>
      {{if .TestMetadata.ExamDescription}}
      <div class="lead mb-2">{{.TestMetadata.ExamDescription}}</div>
      {{end}}
      <!-- Minimum passing score in its own line -->
      <div class="exam-meta mb-2">
        <span class="badge bg-secondary">
          Minimum passing: <b>{{printf "%.2f" .TestMetadata.PassingPercentage}}%</b>
        </span>
      </div>
      <!-- Domains in its own line -->
      <div class="exam-meta mb-3">
        Domains:
        {{range $i, $d := .TestMetadata.ExamDomains}}
          <span class="domain-badge">{{$d}}</span>
        {{end}}
      </div>
      <hr style="margin: 1.5rem 0;">
      <p class="exam-meta">
        Answer all questions. Once submitted, you'll see your score, explanations, and can download a PDF report.
      </p>
    </div>

    <!-- Exam questions form -->
    <form method="POST" action="/submit">
      {{range $index, $q := .Questions}}
        <!-- Question Card -->
        <div class="card question-card mb-4">
          <div class="card-body">
            <h5 class="card-title mb-3">
              <span class="text-primary fw-bold">Q{{add1 $index}}</span>:
              {{$q.Question}}
            </h5>
            <!-- Options: one per line -->
            {{range $optKey, $optVal := $q.Options}}
              <div class="form-check option-radio">
                <input class="form-check-input" type="radio" name="q{{$index}}" id="q{{$index}}_{{$optKey}}" value="{{$optKey}}" required>
                <label class="form-check-label" for="q{{$index}}_{{$optKey}}">
                  <b>{{$optKey}}.</b> {{$optVal}}
                </label>
              </div>
            {{end}}
          </div>
        </div>
      {{end}}
      <!-- Submit Button -->
      <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary submit-btn shadow">Submit Answers</button>
      </div>
    </form>
  </div>
</body>
</html>
